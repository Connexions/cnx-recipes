// <cnx-pi data-type="cnx.eoc">class="summary" title="Chapter Review"</cnx-pi>
// <cnx-pi data-type="cnx.eoc">class="formula-review" title="Formula Review"</cnx-pi>
// <cnx-pi data-type="cnx.eoc">class="practice" title="Practice"</cnx-pi>
// <cnx-pi data-type="cnx.eoc">class="bring-together-exercises" title="Bringing It Together : Practice"</cnx-pi>
// <cnx-pi data-type="cnx.eoc">class="free-response" title="Homework"</cnx-pi>
// <cnx-pi data-type="cnx.eoc">class="bring-together-homework" title="Bringing It Together : Homework"</cnx-pi>
// <cnx-pi data-type="cnx.eoc">class="references" title="References"</cnx-pi>

@import 'common/var-mixins';
@import 'common/numbering';
@import 'common/single-serving';
@import 'common/toc';

body {
  //Clear the trash after certain passes
  &::after {
    //get rid of try-it
    content: clear(trash);
  }
}

div[data-type='chapter'] {
  .glossary("Key Terms");

  .summary(summary, ~'.', h2, "Chapter Review");

  .try {
    div[data-type="solution"] {
      move-to: trash;
    }
  }

  section.formula-review {
    content: nodes(sectionTitle) content();
    .composite-origin(formula-review);
  }
  &::after {
    .composite-destination(formula-review);
  }

  section.practice {
    content: nodes(sectionTitle) content();
    .composite-origin(practice);

    div[data-type="solution"]:pass(25) {
      move-to: eoc-solutions;
    }
  }
  &::after {
    .composite-destination(practice);
  }

  section.bring-together-exercises {
    .composite-origin(bring-together-exercises);

    div[data-type="solution"]:pass(25) {
      move-to: eoc-solutions;
    }
  }
  &::after {
    .composite-destination(bring-together-exercises);
  }

  section.free-response {
    content: nodes(sectionTitle) content();
    .composite-origin(free-response);

    div[data-type="solution"]:pass(25) {
      move-to: eoc-solutions;
    }
  }
  &::after {
    .composite-destination(free-response);
  }

  section.bring-together-homework {
    .composite-origin(bring-together-homework);

    div[data-type="solution"]:pass(25) {
      move-to: eoc-solutions;
    }
  }
  &::after {
    .composite-destination(bring-together-homework);
  }

  section.references {
    content: nodes(sectionTitle) content();
    .composite-origin(references);
  }
  &::after {
    .composite-destination(references);
  }

  &:pass(25)::after {
    container: div;
    data-type: composite-page;
    class: "eoc solutions-container";
    content: pending(eoc-solutions);
  }
  .calculator {
    .doc-title("Using the TI-83, 83+, 84, 84+ Calculator");
  }
  .eoc {
    &.formula-review-container {
      .metadata("Formula Review");
      .doc-title("Formula Review");
    }
    &.practice-container {
      .metadata("Practice");
      .doc-title("Practice");
    }
    &.free-response-container {
      .metadata("Homework");
      .doc-title("Homework");
    }
    &.bring-together-exercises-container {
      .metadata("Bringing It Together: Practice");
      .doc-title("Bringing It Together: Practice");
    }
    &.bring-together-homework-container {
      .metadata("Bringing It Together: Homework");
      .doc-title("Bringing It Together: Homework");
    }
    &.references-container {
      .metadata("References");
      .doc-title("References");
    }
    &.solutions-container {
      .metadata("Solutions");
      .doc-title("Solutions");
    }
    &.glossary {
      .metadata("Key Terms");
    }
     &.summary {
      .metadata("Chapter Review");
    }
  }
}
