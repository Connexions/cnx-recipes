//All mixins in one partial for now
@import "common-refactor/stuff";


//Different language mock-up
$lang: "en";
$chapter_en: "Chapter";
$appendix_en: "Appendix";
$chapter_de: "Kapitel";
$appendix_de: "Anhang";

//Usage: ("[source section]", [?section-separated])
//Still need: ?solutions, actual name of section (e.g. "Key Terms")
//Handle document-titles and metadata with this info
$chapterCompositePages: (
  ("glossary", false),
  ("summary", true),
  ("formula-review", true),
  ("practice", true),
  ("bring-together-exercises", false),
  ("free-response", true),
  ("bring-together-homework", false),
  ("references", true)
);

$chapterTitleContent: (
  ("Chapter", "label"),
  (counter(chapter), "number"),
  ("|", "divider")
);

$appendixTitleContent: (
  ("Appendix", "label"),
  (counter(appendix, upper-alpha), "number"),
  (":", "divider")
);

$sectionTitleContent: (
  (counter(chapter)"."counter(section), "number"),
  ("|", "divider")
);

$exerciseTitleContent: (
  (counter(exercise), "number")
);

$exampleTitleContent: (
  ("Example", "label"),
  (counter(chapter)"."counter(example), "number")
);
$exampleSolutionTitleContent: (
  ("Solution", "label"),
  (counter(chapter)"."counter(example), "number")
);

//New pass system
:pass(0) {
  @include titlePreface();
  //Come up with mixins for common numbering schemes as per Phil's suggestion
  @include countChapters(chapter);
  @include numberChapters($chapterTitleContent);
  @include countAppendices(appendix);
  @include numberAppendices($appendixTitleContent);
  @include countSections(section);
  @include numberSections($sectionTitleContent);
  @include sendSectionTitleNodeAs(sectionTitleNode);
  @include createChapterComposites($chapterCompositePages, sectionTitleNode);
  @include countExamples(example);
  @include numberExamples($exampleTitleContent, $exampleSolutionTitleContent);
}
:pass(1) {
  @include countEOCExercises(exercise);
  @include numberEOCExercises($exerciseTitleContent, $exerciseTitleContent);
}
:pass(2) {
  @include countEOCExercises(exercise);
  @include linkToProblemsFromSolutionsEOC("number", "number", exercise);
}
:pass(100) {
  @include clearTrash();
}