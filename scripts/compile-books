#!/bin/sh

# Find all the rulesets that need to be generated
for bookName in $(cd ./books/rulesets/ && ls -d -- */ )
do
  bookName=$(basename "${bookName}") # Strip the trailing /
  if [[ ! "${bookName}" = 'output' && ! "${bookName}" = 'common' ]]
  then
    sassFile="./books/rulesets/${bookName}/book.scss"
    cssFile="./books/rulesets/output/${bookName}.css"

    >&2 echo "==> Generating ${cssFile}"
    bundle exec sass ${sassFile} ${cssFile}
  fi
done
