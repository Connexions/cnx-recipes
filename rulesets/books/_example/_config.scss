// ==========================================================
//  IMPORTS AREA
// ==========================================================
// Pull in elements that are common for all books, like the link target labels.
// It is commented here to make sure all the vars used in ruleset-generation are documented in this file
// @import '../_common-stuff';

// ==========================================================
//  TITLING CONTENT
// ==========================================================
//
// These describe the labels for things like "Figure 4.3" or "Appendix B".
// They are local vars that are used below.
// NOTE: The order of each value matters; it is the order in which these
// elements will occur in the generated text.
$_exerciseTitleContent       : ( divider: ".", number: counter(exercise) );
$_exampleTitleContent        : ( title-label: "Example ", number: counter(chapter) "." counter(example) );
$_exampleSolutionTitleContent: ( title-label: "Solution ", number: counter(chapter) "." counter(example) );
$_tryTitleContent            : ( title-label: "Try It ", number: counter(chapter) "." counter(example) ); // try it notes are numbered based on the example preceeding them
$_equationNumber             : ( title-label: "Eqn", number: counter(equation) );

// The following are defined in _common-stuff.scss because they do not change
// but are here for completeness.
// TODO: Maybe they should be moved to $Config_PartType_* for consistency instead of being separate vars
$Config_ChapterTitleContent        : ( number: counter(chapter), divider: ' ' );
$Config_AppendixTitleContent       : ( title-label: "Appendix ", number: counter(appendix, upper-alpha), divider: ' ' );
$Config_SectionTitleContent        : ( number: counter(chapter) "." counter(section), divider: ' ' );
$Config_CaptionTableNumber         : ( title-label: "Table ", number: counter(chapter) "." counter(table) );
$Config_CaptionTableNumberAp       : ( title-label: "Table ", number: counter(appendix, upper-alpha) "." counter(table) );
$Config_CaptionFigNumber           : ( title-label: "Figure ", number: counter(chapter) "." counter(figure) );
$Config_CaptionFigNumberAp         : ( title-label: "Figure ", number: counter(appendix, upper-alpha) "." counter(figure) );


// ==========================================================
//  COMPOUND COLLATION PAGES
// ==========================================================
//
// These end-of-chapter/book pages that are autogenerated that have additional
//   nesting.
// For example, a "Test Prep" page may contain 3 items whose fields are
//   defined in the "Collation Pages" area above in this file.
//
// Each entry has the following fields:
// - source: the class name (and bucket) of the page
// - name: The title of the new page (maybe rename?)
// - contains: a list of "COLLATION PAGES" entries
//
// Also, a set of styleguide comments occur above for each composite page.
// Having it here makes it easy to remember to update the documentation and
// by having it above the `$Config_ChapterCompositePages` helps make this area
// more readable (since it sort of looks like a table).
$_compoundTestPrep: (
  (className: "multiple-choice",   sectionSeparated: true, name: "Multiple Choice"),
  (className: "short-answer",      sectionSeparated: true, name: "Short Answer"),
  (className: "extended-response", sectionSeparated: true, name: "Extended Response"),
);
// See below for where this variable is used


// ==========================================================
//  COLLATION PAGES
// ==========================================================
//
// These are the end-of-chapter/book pages that are autogenerated.
// Each entry has a couple standard fields that can be set:
// - source: the class name (and bucket) of the page (maybe rename?)
// - name: The title of the new page (maybe rename?)
// - hasSolutions: true when this item contains exercises that contain solutions
//                 (why is this necessary?)
// - sectionSeparated: true when items on this page should be organized by Section
//                     A header is added which contains the section number and title
//
// There are also a couple of "special" pages: `$PAGE_INDEX` and `$PAGE_GLOSSARY`
// which contain additional configuration fields.
//
// Also, a set of styleguide comments occur above for each composite page.
// Having it here makes it easy to remember to update the documentation and
// by having it above the `$Config_ChapterCompositePages` helps make this area
// more readable (since it sort of looks like a table).

/*
  Practice Problems

  This is an example styleguide snippet.

  Markup: ./styleguide/book.composite.practice.html-baked.html

  Style guide: book.composite.practice
*/
$Config_ChapterCompositePages: (
  (className: "glossary",        specialPageType: $PAGE_GLOSSARY, sortBy: "dl > dt",                  name: "Key Terms"),
  (className: "summary",         sectionSeparated: true,                               name: "Chapter Review"),
  (className: "formula-review",  sectionSeparated: true,                               name: "Formula Review"),
  (className: "practice",        sectionSeparated: true, hasSolutions: true,           name: "Practice"),
  (className: "bring-together-exercises",                hasSolutions: true,           name: "Bringing It Together: Exercises"),
  (className: "free-response",   sectionSeparated: true, hasSolutions: true,           name: "Homework"),
  (className: "bring-together-homework",                 hasSolutions: true,           name: "Bringing It Together: Homework"),
  (className: "references",      sectionSeparated: true,                               name: "References"),
  (className: "solutions",       compoundComposite: true, moveSolutionsTo: $AREA_EOC,  name: "Solutions"),

  // These are compoundComposite pages
  (className: "test-prep", contains: $_compoundTestPrep, name: "Test Prep" ),
);

$Config_BookCompositePages: (
  (className: "index",           specialPageType: $PAGE_INDEX,                              name: "Index"),
);


// ==========================================================
//  CAPTION CONFIG
// ==========================================================

// Configure table and Figure captions
// If this method of setting the content of the label explicity becomes a problem,
// try grabbing the numbering information from the element's header

$Config_SetTableCaption : (captionType: $CAPTION_TABLE,  defaultContainer: caption,    hasCaption: false, hasTitle: true);
$Config_SetFigureCaption: (captionType: $CAPTION_FIGURE, defaultContainer: figcaption, hasCaption: true,  hasTitle: false);


// ==========================================================
//  TARGET LABELS (optional)
// ==========================================================

// Configure the labels of links. You will likely just extend the default set
// with a label for items specific to this book, like links to `Try It` notes.
// (TODO: maybe this should be the default for links to Notes?)
//
// NOTE: These selectors MUST match the counting selectors or be more specific
// otherwise, the increment and the counter() call may fire in the wrong order.
// This may be fixed in a later version of easybake

// This first item is here only for completeness. It can be found in _common-stuff.scss
$Config_TargetLabels: (
  ( selector: '.os-eoc [data-type="exercise"]',               labelText: "Exercise " counter(chapter) "." counter(exercise) ),
  ( selector: '[data-type="chapter"] .example',               labelText: "Example "  counter(chapter) "." counter(example) ),
  ( selector: '[data-type="chapter"] :not(table) > table',    labelText: "Table "    counter(chapter) "." counter(table) ),
  ( selector: '[data-type="chapter"] :not(figure) > figure',  labelText: "Figure "   counter(chapter) "." counter(figure) ),
  ( selector: '[data-type="appendix"] :not(table) > table',   labelText: "Table " counter(appendix, upper-alpha) "." counter(table) ),
  ( selector: '[data-type="appendix"] :not(figure) > figure', labelText: "Figure " counter(appendix, upper-alpha) "." counter(figure) ),
);

// This is what you would most likely write if you need to add a custom link
// TODO: Make this something like [data-type="note"] { content: target-string(attr(href), title)}
$Config_TargetLabels: append( $Config_TargetLabels,
  ( selector: '[data-type="note"].try', labelText: "Try It" )
);


// ==========================================================
//  CUSTOM NOTES
// ==========================================================

// These are a Set of "Feature boxes" that are specific to the book.
// Each entry has a couple standard fields that can be set:
// - className: the class name of the Note
// - moveSolutionTo: Where the solution can be moved to.
//   - $AREA_NONE keeps the solution in place
//   - $AREA_TRASH discards the solution
//   - $AREA_EOC moves the solutions to the end of a chapter
//   - $AREA_EOB moves the solutions to the end of the book
// - labelText: A simple string for the title. cannot be used with `titleContent`
// - titleContent: what the autogenerated title should look like.
//                 Most notes are just a string but some, like "Try It"
//                 are prefaced with which section they occur in
// - counterName: used in conjunction with titleContent to specify the name of the counter
$Config_Notes: (
  (className: 'try',        moveSolutionTo: $AREA_TRASH, counterName: "Try", titleContent: $_tryTitleContent),
  (className: 'calculator', moveSolutionTo: $AREA_NONE,  labelText: "Using the TI-83, 83+, 84, 84+ Calculator"),
);

// Sometimes exercises in notes should not be numbered. This shows which ones.
// TODO: It would be nice to move these into the note config but it seems like
// the context is not always a note, and the child is not always an exercise.
// so the proper place to put this requires a bit more thought
$Config_UnnumberedExercises: (
  (contextSelector: '.try',                   childSelector: '[data-type="exercise"]'),
  (contextSelector: '[data-type="example"]',  childSelector: '[data-type="exercise"]'),
);


// ==========================================================
//  OTHER PARTS
// ==========================================================

// This contains additional elements in the book (like an equation, exercises, solutions)
// Each entry has a few common fields that can be set:
// - moveTo: specifies where to move this element to
// - resetAt: specifies when the counters should reset
//   - $RESET_CHAPTER resets for each chapter
//   - $RESET_COMPOSITE_PAGE resets for each autogenerated page
// - titleContent: The generated title for this element

$Config_PartType_Exercise: (moveTo: $AREA_EOC, resetAt: $RESET_CHAPTER,  numberAt: $NUMBER_BEFORE_MOVE, titleContent: $_exerciseTitleContent);
$Config_PartType_Example:  (moveTo: $AREA_NONE,                          titleContent: $_exampleTitleContent,
                                                                  solutionTitleContent: $_exampleSolutionTitleContent);
$Config_PartType_Chapter:  (outlineTitle: 'Chapter Outline');
$Config_PartType_Equation: (moveTo: $AREA_NONE, resetAt: $RESET_CHAPTER, numberAt: $NUMBER_NONE, titleContent: $_equationNumber, excludeNumberingInClassName: 'section-summary');
$Config_PartType_Solution: (moveTo: $AREA_NONE);


// ==========================================================
//  Coverage optimizations
// ==========================================================
//
// These are mostly just for removing unused selectors from the CSS file.
// If you know for sure that the book does not contain any of these then
//   set these to be false.
$Config_Cover_MayHaveSimlinks: true;
$Config_Cover_MayHaveIframes: true;
$Config_Cover_MayHaveMissingExercises: true;


// ==========================================================
//  Assorted Hacks
// ==========================================================
//
// These have not been incorporated into the structure of config files yet
// and are listed here so they can be revisited and incorporated properly
// into the structure of the config files later, but so development can continue
$Config_HACK_modifyAnyContainerTitleSelector: false;
